# 네트워크

# TCP/IP

- OSI 7계층과 TCP/IP 4계층을 비교하여 설명해주세요.

OSI 7계층은 **네트워크 통신을 표준화한 모델**로, 통신 시스템을 7단계로 나누어 설명한 것입니다.

하지만 OSI 모델이 실무적으로 이용하기에 복잡한 탓에 실제 인터넷에서는 이를 단순화한 TCP/IP 4계층이 사용되고 있습니다.

### OSI 7계층과 TCP/IP 4계층

OSI 7계층과 TCP/IP 4계층 모델에서 각 계층은 하위 계층의 기능을 이용하고, 상위 계층에게 기능을 제공합니다. **예를 들어서 HTTP는 TCP과 IP을 이용해서 작동합니다.**

일반적으로 상위 계층의 프로토콜은 소프트웨어로, 하위 계층의 프로토콜은 하드웨어로 구현됩니다.

(ex. 물리 계층의 통신은 케이블을 통한 전기 신호로 이루어집니다.)

![osi-layer](https://user-images.githubusercontent.com/63832678/188271351-abf2c39d-e1b2-4630-81e2-75cf3ed1cb23.png)
< OSI 모델과 TCP/IP 모델의 관계 > - HTTP, TCP, UDP, IP, Ethernet 등 통신 프로토콜이 TCP/IP 4계층의 어느 계층에 속하는지 살펴보면 네트워크 원리를 파악하기 좋습니다.

### **캡슐화**(Encapsulation) & **역캡슐화**(Decapsulation)

 캡슐화란 통신 프로토콜의 특성을 포함한 **정보를 Header에 포함시켜서 하위 계층에 전송하는 것**을 말합니다. 통신 상대측에서 이러한 Header를 **역순으로 제거하면서 원래의 Data를 얻는 과정**을 역캡슐화라고 합니다.

 예를 들어, **사용자는 최상위 계층인 응용 계층**에서 인터넷 접속(HTTP), 메일 전송(SMTP), 파일 전송(FTP), 원격 로그인(Telnet) 등의 작업을 수행합니다.


 각 사용자입장에서 보면 data가 그냥 전송되는 것처럼 보이게 됩니다. 하지만 이 과정을 OSI 7계층 관점의 캡슐화 / 역캡슐화 과정까지 바라보면 다음과 같습니다.

![encapsulation](https://user-images.githubusercontent.com/63832678/188271524-8c927673-b435-43df-9efc-b485a46ce7c7.png)


 사용자가 전송하고자 하는 데이터는 각 프로토콜의 정보를 **Header에 포함시켜서 하위 계층에 전달**하고(**Encapsulation**), 이것은 최종적으로 물리 계층에서 binary 데이터로 변환되어 전송됩니다.

상대측에서는 이러한 Header를 **역순으로 하나씩 제거하면서 상위 계층으로 데이터를 전달**하고(**Decapsulation**), 최종적으로 원본 데이터를 수신하게 됩니다.

### TCP/IP 4계층? 5계층?

TCP/IP 4계층에서 시작한 네트워크 표준이 꾸준히 갱신되면서 하위 레이어가 다시 세분화 되었습니다. TCP/IP 4계층의 Network Interface Layer를 Data link Layer와 Physical Layer로 나뉘어져서 TCP/IP 5계층 모델이 되었습니다.

### Q. TCP vs UDP를 비교해서 설명해주세요

**TCP**는 연결형, 신뢰성 전송 프로토콜 입니다.  연결지향적 서비스를 제공하기 위해 데이터를 전송하기 전에 `3way handsaking`을 하여 두 호스트의 전송 계층 사이에 논리적 연결을 설립합니다. 신뢰성 있는 서비스를 제공하기 위해 오류제어, 흐름제어, 혼잡제어 등을 실행합니다. 신뢰성을 보장하기 위해서 header가 더 크고 속도가 비교적 느리다는 단점이 있습니다.

 **UDP**는 비연결형 프로토콜로 3-way handshake 등의 세션 수립 과정이 없습니다. 또한 비신뢰성 프로토콜로 흐름제어, 오류제어, 혼잡 제어를 제공하지 않습니다. 이러한 단순성 덕분에 적은 양의 오버헤드갖고 수신여부를 확인하지 않아서 속도가 빠릅니다

 TCP는 신뢰성이 중요한 통신(HTTP, File 전송 등)에 쓰이고, UDP는 실시간성이 중요한 통신(동영상 스트리밍 등)에 주로 사용됩니다.

 ### TCP/IP 전송계층

 TCP/IP는 인터넷에서 사용하는 프로토콜 그룹을 칭합니다. TCP/IP는 Application layer(응용계층), Transport layer(전송계층), Network layer, Data link layer, Physical layer로 5개의 계층으로 나뉩니다.

 그 중에 전송계층은 두 응용 계층 사이에서의 process-to-process 통신을 제공합니다. 전송계층은 응용계층으로부터 메시지를 받아 전송계층 패킷으로 캡슐화하여 전송합니다.(segment 또는 datagram으로 부릅니다.) 

 전송계층의 주된 프로토콜은 TCP, UDP입니다. TCP(Transmission Control Protocol)는 연결형, 신뢰성 전송 프로토콜입니다. TCP로 전송하는 패킷을 segment라고 부릅니다. UDP(User, Datagram Protocol)는 비연결형, 비신뢰성 전송 프로토콜입니다. UDP로 전송하는 패킷을 datagram이라고 합니다.


 ### UDP(User Datagram Protocol)

 UDP는 비연결형, 비신뢰성 전송 프로토콜입니다.

 UDP는 논리적 연결을 설립하지 않고 datagram을 전송하는 비연결형 프로토콜입니다. 또한 흐름제어, 오류제어, 혼잡 제어를 제공하지 않는 간단한 프로토콜입니다. 이러한 단순성은 적은 양의 오버헤드갖기 때문에 작은 메시지를 보내거나 신뢰성을 크게 고려하지 않아도 되는 상황에서 사용합니다.

 ex) 매우 큰 문서파일을 인터넷을 통해 다운받고 있다고 가정해 봅시다. 이 경우엔 신뢰성이 보장되는 프로토콜을 사용해야 합니다. 다운로드 완료된 파일의 일부분이 손실되거나 훼손되어 있으면 안되기 때문입니다. 문서 파일 전송시에 발생하는 지연은 중요한 문제가 아닙니다. 따라서 UDP를 사용하면 안되고 TCP를 사용해야 합니다.

ex) live방송과 같이 실시간 상호작용을 하는 응용프로그램을 사용한다고 가정해 봅시다. 음성과 영상을 한프레임씩 전송을 합니다. 전송계층에서 훼손되거나 손실된 프레임을 재전송 해야된다면 전체적으로 지연이 될겁니다. 따라서 UDP를 통해서 한프레임씩 datagram으로 전송한다면 훼손되거나 손실된 패킷은 그냥 무시하고 나머지 패킷을 응용프로그램으로 전달한다. 손실된 패킷으로 인해 짧은 시간동안 화면의 일부분이 공백으로 표시되더라도 대부분의 시청자들은 인식하지 못합니다. 이 때는 신뢰성보다 실시간성이 더 중요하기때문에 UDP를 사용합니다.